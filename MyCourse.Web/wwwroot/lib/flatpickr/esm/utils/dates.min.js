import{tokenRegex,revFormat,formats}from"./formatting";import{defaults}from"../types/options";import{english}from"../l10n/default";var createDateFormatter=function(e){var t=e.config,o=void 0===t?defaults:t,t=e.l10n,n=void 0===t?english:t,e=e.isMobile,i=void 0!==e&&e;return function(a,e,t){var r=t||n;return void 0===o.formatDate||i?e.split("").map(function(e,t,n){return formats[e]&&"\\"!==n[t-1]?formats[e](a,r,o):"\\"!==e?e:""}).join(""):o.formatDate(a,e,r)}},createDateParser=function(e){var t=e.config,D=void 0===t?defaults:t,e=e.l10n,v=void 0===e?english:e;return function(e,t,n,a){if(0===e||e){var r,o=a||v,a=e;if(e instanceof Date)r=new Date(e.getTime());else if("string"!=typeof e&&void 0!==e.toFixed)r=new Date(e);else if("string"==typeof e){var i=t||(D||defaults).dateFormat,t=String(e).trim();if("today"===t)r=new Date,n=!0;else if(D&&D.parseDate)r=D.parseDate(e,i);else if(/Z$/.test(t)||/GMT$/.test(t))r=new Date(e);else{for(var s=void 0,u=[],f=0,m=0,d="";f<i.length;f++){var c=i[f],g="\\"===c,l="\\"===i[f-1]||g;tokenRegex[c]&&!l?(d+=tokenRegex[c],(l=new RegExp(d).exec(e))&&(s=!0)&&u["Y"!==c?"push":"unshift"]({fn:revFormat[c],val:l[++m]})):g||(d+=".")}r=D&&D.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0),u.forEach(function(e){var t=e.fn,e=e.val;return r=t(r,e,o)||r}),r=s?r:void 0}}if(r instanceof Date&&!isNaN(r.getTime()))return!0===n&&r.setHours(0,0,0,0),r;D.errorHandler(new Error("Invalid date provided: "+a))}}};function compareDates(e,t,n){return!1!==(n=void 0===n?!0:n)?new Date(e.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):e.getTime()-t.getTime()}function compareTimes(e,t){return 3600*(e.getHours()-t.getHours())+60*(e.getMinutes()-t.getMinutes())+e.getSeconds()-t.getSeconds()}var isBetween=function(e,t,n){return e>Math.min(t,n)&&e<Math.max(t,n)},calculateSecondsSinceMidnight=function(e,t,n){return 3600*e+60*t+n},parseSeconds=function(e){var t=Math.floor(e/3600),n=(e-3600*t)/60;return[t,n,e-3600*t-60*n]},duration={DAY:864e5};function getDefaultHours(e){var t,n,a,r=e.defaultHour,o=e.defaultMinute,i=e.defaultSeconds;return void 0!==e.minDate&&(t=e.minDate.getHours(),n=e.minDate.getMinutes(),a=e.minDate.getSeconds(),(r=r<t?t:r)===t&&o<n&&(o=n),r===t&&o===n&&i<a&&(i=e.minDate.getSeconds())),void 0!==e.maxDate&&(n=e.maxDate.getHours(),a=e.maxDate.getMinutes(),(r=Math.min(r,n))===n&&(o=Math.min(a,o)),r===n&&o===a&&(i=e.maxDate.getSeconds())),{hours:r,minutes:o,seconds:i}}export{createDateFormatter,createDateParser,compareDates,compareTimes,isBetween,calculateSecondsSinceMidnight,parseSeconds,duration,getDefaultHours};